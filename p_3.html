<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MKX: 3 Get Started</title>
<link rel="icon" type="image/x-icon" href="mkx.svg">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="mkx.svg" style="height: 60px; padding: 10px;"/>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MKX
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Next Generation Mechanical Keyboard Firmware</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('p_3.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">3 Get Started</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#p_3_1">3.1 Hardware Keypass</a></li>
<li class="level1"><a href="#p_3_2">3.2 Booster Keyboard</a></li>
<li class="level1"><a href="#p_3_3">3.3 Square Keyboard</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="p_3_1"></a>
3.1 Hardware Keypass</h1>
<div style="margin-left: 100px;"> <img src="KeyPass_keyboard.jpg" alt="" width="800" class="inline"/> </div><p>This simple setup uses an unmodified <em>Seeed Xiao RP2040</em> connected to a computer via USB. <br  />
</p>
<p>To make it more useful and entertaining, we simulate the behavior of a hardware security key. <br  />
 ⚠️ <b>Warning:</b> <em>This is not intended for real security purposes. Actual hardware keys use encryption and have more advanced mechanisms.</em> <br  />
</p>
<p>By bridging pin D5 (sending pin) and pin D6 (receiving pin) with pliers or any other conductive object like a wire, paper clip, etc. predefined key string is sent to the computer.</p>
<p>This setup uses only one hardware component, which acts as both the signal sender and the central processing unit. <br  />
 For this reason <b>PeripheryCentral</b> is defined and added to the keyboard object. Each peripheral device also requires an interface, here <b>InterphaceCentral</b> is added to fulfill that role.</p>
<p>Standard keyboard keys were used, modifier key <b>M_LSFT</b> was applied to produce capital letters and special characters. <br  />
 All input is grouped under a single key called <b>HK</b>, defined as a sequence <b>SEQ</b> key. <br  />
 The keymap is simple and consists of only one key: <b>HK</b>.</p>
<div class="fragment"><div class="line"><span class="comment"># code.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.mkx_central <span class="keyword">import</span> MKX_Central</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.keys_standard <span class="keyword">import</span> *</div>
<div class="line"><span class="keyword">from</span> mkx.keys_modifiers <span class="keyword">import</span> M_LSFT</div>
<div class="line"><span class="keyword">from</span> mkx.keys_sequence <span class="keyword">import</span> SEQ</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.periphery_central <span class="keyword">import</span> PeripheryCentral</div>
<div class="line"><span class="keyword">from</span> mkx.interphace_central <span class="keyword">import</span> InterphaceCentral</div>
<div class="line"> </div>
<div class="line">keyboard = MKX_Central()</div>
<div class="line"> </div>
<div class="line">col_pins = (board.D5,)</div>
<div class="line">row_pins = (board.D6,)</div>
<div class="line">hardware_keypass_peryphery = PeripheryCentral(<span class="stringliteral">&quot;hardware_keypass&quot;</span>, col_pins, row_pins)</div>
<div class="line">keyboard.add_central_periphery(hardware_keypass_peryphery)</div>
<div class="line"> </div>
<div class="line">interphace_central = InterphaceCentral(hardware_keypass_peryphery, 0, 0, 0, 0)</div>
<div class="line">keyboard.add_interface(interphace_central)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: off</span></div>
<div class="line"> </div>
<div class="line">HK = SEQ([M_LSFT(H), E, L, L, O, SPACE, </div>
<div class="line">          M_LSFT(W), O, R, L, D, SPACE, </div>
<div class="line">          M_LSFT(M), M_LSFT(K), M_LSFT(X), M_LSFT(N1), ENTER])</div>
<div class="line"> </div>
<div class="line">keymap = [</div>
<div class="line">    [</div>
<div class="line">        HK,</div>
<div class="line">    ],</div>
<div class="line">]</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: on</span></div>
<div class="line"> </div>
<div class="line">keyboard.add_keymap(keymap, 1, 1)</div>
<div class="line">keyboard.run_forever()</div>
</div><!-- fragment --><h1><a class="anchor" id="p_3_2"></a>
3.2 Booster Keyboard</h1>
<div style="margin-left: 100px;"> <img src="BOOSTER_keyboard.jpg" alt="" width="800" class="inline"/> </div><p>Here is a more practical example using a split keyboard called <b>Booster</b>.</p>
<p>Both halves of the keyboard use the <em>Pimoroni PGA2040</em> board, chosen for its small footprint, numerous available GPIO pins, and minimal onboard extras.</p>
<p>In the image, you can see:</p><ul>
<li>hot swap choc keys sockets</li>
<li>development wiring on the right half, connecting it to USB for programming.</li>
<li>loop between the sending and receiving pins used for debugging the UART connection.</li>
<li>USB magnetic connector soldered to the left half, intended for regular usage.</li>
<li>status RGB LED glowing green, indicating the currently active layer.</li>
</ul>
<p>The keyboard runs slightly modified <a href="https://workmanlayout.org/">Workman layout</a> and supports various types of keys, including <b>media keys</b>.</p>
<p>In terms of architecture:</p><ul>
<li>The left half functions as the <b>PeripheryCentral</b></li>
<li>The right half functions as the <b>PeripheryUART</b></li>
</ul>
<p>These peripheries are designed solely to send signals to the central processor using a defined protocol.</p>
<p>The left half also contains the <b>Interphaces</b> for both sides, managing communication between the <b>central</b> unit and each <b>periphery</b>.</p>
<p>The <b>status LED</b> indicates the active layer:</p><ul>
<li>Green for Layer 1</li>
<li>Blue for Layer 2</li>
</ul>
<p>Additionally, a few shortcut keys are defined, which are referenced later in the keymap.</p>
<p><b>Left Keyboard Part (Central)</b> </p><div class="fragment"><div class="line"><span class="comment"># code.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.mkx_central <span class="keyword">import</span> MKX_Central</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.periphery_central <span class="keyword">import</span> PeripheryCentral</div>
<div class="line"><span class="keyword">from</span> mkx.interphace_central <span class="keyword">import</span> InterphaceCentral</div>
<div class="line"><span class="keyword">from</span> mkx.interphace_uart <span class="keyword">import</span> InterphaceUART</div>
<div class="line"><span class="keyword">from</span> mkx.layer_status_led_rgb_neopixel <span class="keyword">import</span> LayerStatusLedRgbNeoPixel</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.keys_standard <span class="keyword">import</span> *</div>
<div class="line"><span class="keyword">from</span> mkx.keys_modifiers <span class="keyword">import</span> M_LGUI</div>
<div class="line"><span class="keyword">from</span> mkx.keys_holdtap <span class="keyword">import</span> HT</div>
<div class="line"><span class="keyword">from</span> mkx.keys_layers <span class="keyword">import</span> MO, TO</div>
<div class="line"><span class="keyword">from</span> mkx.keys_media <span class="keyword">import</span> VOLU, VOLD</div>
<div class="line"> </div>
<div class="line">keyboard = MKX_Central()</div>
<div class="line"> </div>
<div class="line">col_pins = (board.GP9, board.GP7, board.GP5, board.GP4, board.GP3, board.GP2)</div>
<div class="line">row_pins = (board.GP10, board.GP11, board.GP13, board.GP15, board.GP17)</div>
<div class="line"> </div>
<div class="line">central_peryphery = PeripheryCentral(<span class="stringliteral">&quot;booster_l&quot;</span>, col_pins, row_pins)</div>
<div class="line">keyboard.add_central_periphery(central_peryphery)</div>
<div class="line"> </div>
<div class="line">interphace_central = InterphaceCentral(central_peryphery, 0, 0, 5, 4)</div>
<div class="line">keyboard.add_interface(interphace_central)</div>
<div class="line"> </div>
<div class="line">interphace_right = InterphaceUART(<span class="stringliteral">&quot;booster_r&quot;</span>, <span class="keywordtype">None</span>, board.GP1, 11, 0, 6, 4)</div>
<div class="line">keyboard.add_interface(interphace_right)</div>
<div class="line"> </div>
<div class="line">status_led = LayerStatusLedRgbNeoPixel(board.GP23, brightness=0.015)</div>
<div class="line">status_led.add_layer(0, (0, 255, 0))  <span class="comment"># Green</span></div>
<div class="line">status_led.add_layer(1, (0, 0, 255))  <span class="comment"># Blue</span></div>
<div class="line">keyboard.add_layer_status_led(status_led)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Shortcuts</span></div>
<div class="line">DESKTOP = M_LGUI(D)</div>
<div class="line">LOCK = M_LGUI(L)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Hold Tap</span></div>
<div class="line">LAY1 = HT(TO(1), MO(1))</div>
<div class="line">LAY0 = HT(TO(0), MO(0))</div>
<div class="line"> </div>
<div class="line">LCTL_TAB = HT(TAB, LCTRL)</div>
<div class="line">LSFT_SPC = HT(SPC, LSFT)</div>
<div class="line">RALT_BSPC = HT(BSPC, RALT)</div>
<div class="line">LALT_BSPC = HT(BSPC, LALT)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: off</span></div>
<div class="line"> </div>
<div class="line">keymap = [</div>
<div class="line">    [</div>
<div class="line">        GRV,        N1,         N2,         N3,         N4,         N5,         N6,         N7,         N8,         N9,         N0,         BSLS,</div>
<div class="line">        EQL,        Q,          D,          R,          W,          L,          J,          F,          U,          P,          SCLN,       LBRC,</div>
<div class="line">        MINS,       A,          S,          H,          T,          G,          Y,          N,          E,          O,          I,          QUOT,</div>
<div class="line">        LCTL_TAB,   Z,          X,          C,          V,          B,          K,          M,          COMM,       DOT,        SLSH,       RBRC,</div>
<div class="line">        <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       LSFT_SPC,   ENTER,      LAY1,       RALT_BSPC,  <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,</div>
<div class="line">    ],</div>
<div class="line">    [</div>
<div class="line">        ESC,        F1,         F2,         F3,         F4,         F5,         F6,         F7,         F8,         F9,         F10,        F11,</div>
<div class="line">        <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       DESKTOP,    PAGE_UP,    <span class="keywordtype">None</span>,       LOCK,       <span class="keywordtype">None</span>,       BSPC,       UP,         DEL,        <span class="keywordtype">None</span>,       F12,</div>
<div class="line">        <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       HOME,       PAGE_DOWN,  END,        <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       LEFT,       DOWN,       RIGHT,      <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,</div>
<div class="line">        LCTL_TAB,   Z,          X,          C,          V,          <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       VOLD,       <span class="keywordtype">None</span>,       VOLU,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,</div>
<div class="line">        <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       LSFT_SPC,   ENTER,      LAY0,       LALT_BSPC,  <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,</div>
<div class="line">    ]</div>
<div class="line">]</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: on</span></div>
<div class="line"> </div>
<div class="line">keyboard.add_keymap(keymap, 12, 5)</div>
<div class="line">keyboard.run_forever()</div>
</div><!-- fragment --><p><b>Right Keyboard Part</b></p>
<div class="fragment"><div class="line"><span class="comment"># code.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.mkx_periphery <span class="keyword">import</span> MKX_Periphery</div>
<div class="line"><span class="keyword">from</span> mkx.periphery_uart <span class="keyword">import</span> PeripheryUART</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">col_pins = (board.GP9, board.GP7, board.GP5, board.GP4, board.GP3, board.GP2)</div>
<div class="line">row_pins = (board.GP10, board.GP11, board.GP13, board.GP15, board.GP17)</div>
<div class="line"> </div>
<div class="line">peryphery = PeripheryUART(<span class="stringliteral">&quot;booster_r&quot;</span>, col_pins, row_pins, board.GP0, board.GP1)</div>
<div class="line"> </div>
<div class="line">keyboard = MKX_Periphery(peryphery, debug=<span class="keyword">True</span>)</div>
<div class="line">keyboard.run_forever()</div>
</div><!-- fragment --><h1><a class="anchor" id="p_3_3"></a>
3.3 Square Keyboard</h1>
<div style="margin-left: 100px;"> <img src="SQ_keyboard.jpg" alt="" class="inline"/> </div><p>Another split keyboard example, called <b>Sq (Square)</b>, is equipped with <em>Feather ESP32-S3</em> boards on both halves. <br  />
 This board provides several advantages, including potential Bluetooth connectivity, battery support, and onboard charging capabilities.</p>
<p>Since many parts of the code are shared with the Booster keyboard, this overview will focus only on the key differences.</p>
<p>The left half, which connects to the computer, includes a new file: <b>boot.py</b>. <br  />
 This script runs immediately when the board powers on, allowing configuration of USB device properties.</p>
<p>This includes:</p><ul>
<li>defining the keyboard's USB type and name</li>
<li>disabling auto-reload on file save or system glitches, improving stability during everyday use</li>
<li>preventing the board from appearing as a mass storage device, which is important for cybersecurity policies in some workplaces</li>
</ul>
<p>To re-enable the storage device mode, a specific key (wired to source and sense pins) must be held down while powering on the board. <br  />
 ⚠️ <b>Warning:</b> <em>Always back up your code before disabling the storage feature. Incorrect pin configuration or other errors can make the board unresponsive. <br  />
 In such cases, a hard reset may be required, which erases all data and necessitates re-uploading your code.</em></p>
<p>Additional Features:</p><ul>
<li><b>RGB backlighting</b>: the keyboard has a slowly glowing rainbow effect across its keys</li>
<li><b>VIM emulation</b>: the keyboard can simulate VIM editor behavior using a custom <b>keys_vim</b> configuration</li>
</ul>
<p>Each keyboard layer corresponds to a different <b>VIM mode</b>, indicated by the <b>status LED</b>. <br  />
 Even if you're not a VIM fan, you may find some picked <em>vim_keys</em> useful in your own keymap. <br  />
 Theoretically, this behavior can work even in text input fields of a browser 😉</p>
<p><b>Left Keyboard Part (Central)</b></p>
<div class="fragment"><div class="line"><span class="comment"># boot.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.boot_config <span class="keyword">import</span> boot_cfg</div>
<div class="line"> </div>
<div class="line">boot_cfg(</div>
<div class="line">    sense=board.D13,  <span class="comment"># column</span></div>
<div class="line">    source=board.D5,  <span class="comment"># row</span></div>
<div class="line">    autoreload=<span class="keyword">False</span>,</div>
<div class="line">    storage=<span class="keyword">False</span>,</div>
<div class="line">    usb_id=(<span class="stringliteral">&quot;MKX Device&quot;</span>, <span class="stringliteral">&quot;Sq Keyboard&quot;</span>),</div>
<div class="line">)</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment"># code.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.mkx_central <span class="keyword">import</span> MKX_Central</div>
<div class="line"><span class="keyword">from</span> mkx.layer_status_led_rgb_neopixel <span class="keyword">import</span> LayerStatusLedRgbNeoPixel</div>
<div class="line"><span class="keyword">from</span> mkx.backlight_neopixel_rainbow <span class="keyword">import</span> BacklightNeopixelRainbow</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.keys_standard <span class="keyword">import</span> *</div>
<div class="line"><span class="keyword">from</span> mkx.keys_modifiers <span class="keyword">import</span> M_LCTL, M_LSFT, M_LGUI</div>
<div class="line"><span class="keyword">from</span> mkx.keys_media <span class="keyword">import</span> VOLU, VOLD</div>
<div class="line"><span class="keyword">from</span> mkx.keys_holdtap <span class="keyword">import</span> HT</div>
<div class="line"><span class="keyword">from</span> mkx.keys_layers <span class="keyword">import</span> TO</div>
<div class="line"><span class="keyword">from</span> mkx.keys_vim <span class="keyword">import</span> *</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.periphery_central <span class="keyword">import</span> PeripheryCentral</div>
<div class="line"><span class="keyword">from</span> mkx.interphace_central <span class="keyword">import</span> InterphaceCentral</div>
<div class="line"><span class="keyword">from</span> mkx.interphace_uart <span class="keyword">import</span> InterphaceUART</div>
<div class="line"> </div>
<div class="line">keyboard = MKX_Central()</div>
<div class="line"> </div>
<div class="line">col_pins = (board.D13, board.D12, board.D11, board.A1, board.A4, board.A3)</div>
<div class="line">row_pins = (board.A2, board.MISO, board.D10, board.D9, board.D6, board.D5)</div>
<div class="line">central_peryphery = PeripheryCentral(<span class="stringliteral">&quot;sq_l&quot;</span>, col_pins, row_pins)</div>
<div class="line">keyboard.add_central_periphery(central_peryphery)</div>
<div class="line"> </div>
<div class="line">interphace_central = InterphaceCentral(central_peryphery, 0, 0, 5, 5)</div>
<div class="line">keyboard.add_interface(interphace_central)</div>
<div class="line"> </div>
<div class="line">interphace_right = InterphaceUART(<span class="stringliteral">&quot;sq_r&quot;</span>, board.TX, board.RX, 6, 0, 11, 5)</div>
<div class="line">keyboard.add_interface(interphace_right)</div>
<div class="line"> </div>
<div class="line">status_led = LayerStatusLedRgbNeoPixel(board.SCK)</div>
<div class="line">status_led.add_layer(0, (0, 0, 255))  <span class="comment"># Blue</span></div>
<div class="line">status_led.add_layer(1, (0, 255, 0))  <span class="comment"># Green</span></div>
<div class="line">status_led.add_layer(2, (255, 255, 255))  <span class="comment"># White</span></div>
<div class="line">status_led.add_layer(3, (255, 0, 0))  <span class="comment"># Red</span></div>
<div class="line">keyboard.add_layer_status_led(status_led)</div>
<div class="line"> </div>
<div class="line">backlight = BacklightNeopixelRainbow(board.A0, num_pixels=72, brightness=0.4)</div>
<div class="line">backlight.slower(2)</div>
<div class="line">backlight.set_swirl(<span class="keyword">True</span>)</div>
<div class="line">keyboard.add_backlight(backlight)</div>
<div class="line"> </div>
<div class="line">OPEN = M_LCTL(O)</div>
<div class="line">CLOSE = M_LCTL(W)</div>
<div class="line">SAVE = M_LCTL(S)</div>
<div class="line">TABS = M_LCTL(J)</div>
<div class="line">TOOLS = M_LCTL(B)</div>
<div class="line">DESKTOP = M_LGUI(D)</div>
<div class="line">LOCK = M_LGUI(L)</div>
<div class="line">PTAB = M_LCTL(PGUP)</div>
<div class="line">NTAB = M_LCTL(PGDN)</div>
<div class="line">COMMENT = M_LCTL(SLSH)</div>
<div class="line"> </div>
<div class="line">RALT_DEL = HT(DEL, RALT)</div>
<div class="line">LALT_DEL = HT(DEL, LALT)</div>
<div class="line">LSFT_SPC = HT(SPC, LSFT)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: off</span></div>
<div class="line">keymap = [</div>
<div class="line">    <span class="comment"># Normal</span></div>
<div class="line">    [</div>
<div class="line">        ESC,        F1,             F2,             F3,         F4,             F5,         F6,         F7,         F8,         F9,             F10,        F11,</div>
<div class="line">        GRV,        N1,             N2,             N3,         N4,             N5,         N6,         N7,         N8,         N9,             N0,         F12,</div>
<div class="line">        VI_MVLU,    <span class="keywordtype">None</span>,           VI_DEL,         VI_REPL.L(3), SAVE,         LOCK,       TABS,       VI_FIND,    VI_UNDO,    VI_PAST,        <span class="keywordtype">None</span>,       VOLU,</div>
<div class="line">        VI_MVLD,    VI_APND.L(1),   VI_SUBS.L(1),   HOME,       TOOLS,          DESKTOP,    VI_YANK,    VI_NXTW,    END,        OPEN,           VI_INS.L(1),VOLD,</div>
<div class="line">        TAB,        <span class="keywordtype">None</span>,           VI_CUT,         CLOSE,      TO(2),          VI_PRVW,    <span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,       PTAB,       NTAB,           COMMENT,    <span class="keywordtype">None</span>,</div>
<div class="line">        LCTRL,      LCTRL,          ENT,            ENT,        LSFT_SPC,       LSFT_SPC,   BSPC,       LALT_DEL,   LEFT,       UP,             DOWN,       RIGHT,</div>
<div class="line">    ],</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Edit </span></div>
<div class="line">    [</div>
<div class="line">        TO(0),      F1,             F2,             F3,         F4,             F5,         F6,         F7,         F8,         F9,             F10,        F11,</div>
<div class="line">        GRV,        N1,             N2,             N3,         N4,             N5,         N6,         N7,         N8,         N9,             N0,         BSLS,</div>
<div class="line">        EQL,        Q,              D,              R,          W,              L,          J,          F,          U,          P,              SCLN,       LBRC,</div>
<div class="line">        MINS,       A,              S,              H,          T,              G,          Y,          N,          E,          O,              I,          QUOT,</div>
<div class="line">        TAB,        Z,              X,              C,          V,              B,          K,          M,          COMM,       DOT,            SLSH,       RBRC,</div>
<div class="line">        LCTRL,      LCTRL,          ENT,            ENT,        LSFT_SPC,       LSFT_SPC,   BSPC,       RALT_DEL,   LEFT,       UP,             DOWN,       RIGHT,</div>
<div class="line">    ],</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Visual</span></div>
<div class="line">    [</div>
<div class="line">        TO(0),              F1,             F2,             F3,             F4,         F5,             F6,         F7,             F8,             F9,         F10,            F11,</div>
<div class="line">        GRV,                N1,             N2,             N3,             N4,         N5,             N6,         N7,             N8,             N9,         N0,             F12,</div>
<div class="line">        M_LSFT(VI_NXTL),    <span class="keywordtype">None</span>,           VI_DEL,         VI_REPL.L(3),   SAVE,       LOCK,           TABS,       VI_FIND,        VI_UNDO,        VI_PAST,    <span class="keywordtype">None</span>,           <span class="keywordtype">None</span>,</div>
<div class="line">        M_LSFT(VI_PRVL),    VI_APND.L(1),   VI_SUBS.L(1),   M_LSFT(HOME),   TOOLS,      DESKTOP,        VI_YANK,    M_LSFT(VI_NXTW),M_LSFT(END),    OPEN,       VI_INS.L(1),    <span class="keywordtype">None</span>,</div>
<div class="line">        TAB,                <span class="keywordtype">None</span>,           VI_CUT,         CLOSE,          <span class="keywordtype">None</span>,       M_LSFT(VI_PRVW),<span class="keywordtype">None</span>,       <span class="keywordtype">None</span>,           PTAB,           NTAB,       COMMENT,        <span class="keywordtype">None</span>,</div>
<div class="line">        LCTRL,              LCTRL,          ENT,            ENT,            LSFT_SPC,   LSFT_SPC,       BSPC,       LALT_DEL,       M_LSFT(LEFT),   M_LSFT(UP), M_LSFT(DOWN),   M_LSFT(RIGHT),</div>
<div class="line">    ],</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Replace </span></div>
<div class="line">    [</div>
<div class="line">        VI_R_ESC.L(0), F1,          F2,             F3,         F4,             F5,         F6,         F7,         F8,         F9,             F10,        F11,</div>
<div class="line">        GRV,        N1,             N2,             N3,         N4,             N5,         N6,         N7,         N8,         N9,             N0,         BSLS,</div>
<div class="line">        EQL,        Q,              D,              R,          W,              L,          J,          F,          U,          P,              SCLN,       LBRC,</div>
<div class="line">        MINS,       A,              S,              H,          T,              G,          Y,          N,          E,          O,              I,          QUOT,</div>
<div class="line">        TAB,        Z,              X,              C,          V,              B,          K,          M,          COMM,       DOT,            SLSH,       RBRC,</div>
<div class="line">        LCTRL,      LCTRL,          ENT,            ENT,        LSFT_SPC,       LSFT_SPC,   BSPC,       RALT_DEL,   LEFT,       UP,             DOWN,       RIGHT,</div>
<div class="line">    ],</div>
<div class="line">]</div>
<div class="line"> </div>
<div class="line"><span class="comment"># fmt: on</span></div>
<div class="line"> </div>
<div class="line">keyboard.add_keymap(keymap, 12, 6)</div>
<div class="line">keyboard.run_forever()</div>
</div><!-- fragment --><p><b>Right Keyboard Part</b> </p><div class="fragment"><div class="line"><span class="comment"># code.py</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">import</span> board</div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> mkx.mkx_periphery <span class="keyword">import</span> MKX_Periphery</div>
<div class="line"><span class="keyword">from</span> mkx.periphery_uart <span class="keyword">import</span> PeripheryUART</div>
<div class="line"> </div>
<div class="line">col_pins = (board.D13, board.D12, board.D11, board.A1, board.A4, board.A3)</div>
<div class="line">row_pins = (board.A2, board.MISO, board.D10, board.D9, board.D6, board.D5)</div>
<div class="line"> </div>
<div class="line">peryphery = PeripheryUART(<span class="stringliteral">&quot;sq_r&quot;</span>, col_pins, row_pins, board.TX, board.RX)</div>
<div class="line"> </div>
<div class="line">keyboard = MKX_Periphery(peryphery, debug=<span class="keyword">True</span>)</div>
<div class="line">keyboard.run_forever()</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
